<!doctype html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>認証付きHTMLビューア</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>
<script>
function getLoginCache(){
  const raw = localStorage.getItem("harutyan-login");
  if(!raw) return null;
  try{
    const data = JSON.parse(raw);
    if(Date.now() > data.expiresAt){
      localStorage.removeItem("harutyan-login");
      return null;
    }
    return data.email;
  }catch{return null;}
}
function b64ToText(b64){
  return decodeURIComponent(escape(atob(b64)));
}
const EMBED_B64 = "PCFET0NUWVBFIGh0bWw+CjxodG1sIGxhbmc9ImphIj4KPGhlYWQ+CiAgPG1ldGEgY2hhcnNldD0iVVRGLTgiIC8+CiAgPG1ldGEgbmFtZT0idmlld3BvcnQiIGNvbnRlbnQ9IndpZHRoPWRldmljZS13aWR0aCwgaW5pdGlhbC1zY2FsZT0xLjAiLz4KICA8dGl0bGU+44Oq44Oz44Kv5Z+L44KB6L6844G/44OT44Ol44O844KiPC90aXRsZT4KICA8c3R5bGU+CiAgICBib2R5IHsgZm9udC1mYW1pbHk6IHN5c3RlbS11aSwgLWFwcGxlLXN5c3RlbSwgIlNlZ29lIFVJIiwgUm9ib3RvLCAiSGlyYWdpbm8gS2FrdSBHb3RoaWMgUHJvTiIsICJOb3RvIFNhbnMgSlAiLCBzYW5zLXNlcmlmOyBtYXJnaW46IDI0cHg7IH0KICAgIC5iYXIgeyBkaXNwbGF5OiBmbGV4OyBnYXA6IDhweDsgYWxpZ24taXRlbXM6IGNlbnRlcjsgfQogICAgaW5wdXRbdHlwZT0idGV4dCJdIHsgZmxleDogMTsgcGFkZGluZzogOHB4IDEwcHg7IGZvbnQtc2l6ZTogMTRweDsgfQogICAgYnV0dG9uIHsgcGFkZGluZzogOHB4IDE0cHg7IGZvbnQtc2l6ZTogMTRweDsgY3Vyc29yOiBwb2ludGVyOyB9CiAgICAjbXNnIHsgbWFyZ2luLXRvcDogMTBweDsgY29sb3I6ICNiMDAwMjA7IG1pbi1oZWlnaHQ6IDEuMmVtOyB9CiAgICBpZnJhbWUgeyB3aWR0aDogMTAwJTsgaGVpZ2h0OiA3MHZoOyBib3JkZXI6IDFweCBzb2xpZCAjZGRkOyBtYXJnaW4tdG9wOiAxNnB4OyB9CiAgPC9zdHlsZT4KPC9oZWFkPgo8Ym9keT4KICA8aDE+44Oq44Oz44Kv5Z+L44KB6L6844G/44OT44Ol44O844KiPC9oMT4KICAgIDxoNT55b3V0dWJl44Gq44Gp44Gu5Z+L44KB6L6844G/44KS5ouS5ZCm44GX44Gm44GE44KL44K144Kk44OI44Gv6KGo56S644Gn44GN44Gq44GE44GL44KC44GX44KM44Gq44GE44KIPC9oNT4KCiAgPGRpdiBjbGFzcz0iYmFyIj4KICAgIDxpbnB1dCBpZD0idXJsSW5wdXQiIHR5cGU9InRleHQiIHBsYWNlaG9sZGVyPSLkvos6IGh0dHBzOi8vZXhhbXBsZS5jb20g44G+44Gf44GvIGV4YW1wbGUuY29tIi8+CiAgICA8YnV0dG9uIGlkPSJhY2Nlc3NCdG4iPuOCouOCr+OCu+OCuTwvYnV0dG9uPgogIDwvZGl2PgogIDxkaXYgaWQ9Im1zZyIgYXJpYS1saXZlPSJwb2xpdGUiPjwvZGl2PgoKICA8IS0tIOWfi+OCgei+vOOBv+ihqOekuumgmOWfnyAtLT4KICA8aWZyYW1lIGlkPSJ2aWV3ZXIiIHRpdGxlPSLln4vjgoHovrzjgb/jgrXjgqTjg4jooajnpLoiIHNhbmRib3g9ImFsbG93LXNjcmlwdHMgYWxsb3ctZm9ybXMgYWxsb3ctc2FtZS1vcmlnaW4iPjwvaWZyYW1lPgoKICA8c2NyaXB0PgogICAgY29uc3QgaW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndXJsSW5wdXQnKTsKICAgIGNvbnN0IGJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhY2Nlc3NCdG4nKTsKICAgIGNvbnN0IG1zZyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtc2cnKTsKICAgIGNvbnN0IHZpZXdlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd2aWV3ZXInKTsKCiAgICBmdW5jdGlvbiBpc1NjcmlwdExpa2UocykgewogICAgICBjb25zdCB2ID0gU3RyaW5nKHMpLnRvTG93ZXJDYXNlKCkudHJpbSgpOwogICAgICAvLyDjgZbjgaPjgY/jgorjgajjgZfjgZ/mpJznn6XvvIg8c2NyaXB0LCBqYXZhc2NyaXB0OiwgSFRNTOOCv+OCsOOAgeOCpOODs+ODqeOCpOODs+OCpOODmeODs+ODiOetie+8iQogICAgICByZXR1cm4gLzxccypzY3JpcHR8amF2YXNjcmlwdDp8b25cdytccyo9fDx8Pi8udGVzdCh2KTsKICAgIH0KCiAgICBmdW5jdGlvbiBub3JtYWxpemVVcmwocmF3KSB7CiAgICAgIGxldCBzID0gU3RyaW5nKHJhdykudHJpbSgpOwogICAgICAvLyDjgrnjgq3jg7zjg6DjgYzjgarjgZHjgozjgbAgaHR0cHMg44KS6KOc44GGCiAgICAgIGlmICghL15bYS16XVthLXowLTkrXC0uXSo6XC9cLy9pLnRlc3QocykpIHsKICAgICAgICBzID0gJ2h0dHBzOi8vJyArIHM7CiAgICAgIH0KICAgICAgdHJ5IHsKICAgICAgICAvLyDnm7jlr77jgavjgarjgonjgarjgYTjgojjgYZVUkzjgajjgZfjgabmpJzoqLwKICAgICAgICBjb25zdCB1ID0gbmV3IFVSTChzKTsKICAgICAgICByZXR1cm4gdS5ocmVmOwogICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBzaG93TWVzc2FnZSh0ZXh0LCBjb2xvciA9ICcjYjAwMDIwJykgewogICAgICBtc2cuc3R5bGUuY29sb3IgPSBjb2xvcjsKICAgICAgbXNnLnRleHRDb250ZW50ID0gdGV4dDsKICAgIH0KCiAgICBidG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7CiAgICAgIHNob3dNZXNzYWdlKCcnKTsgLy8g44Kv44Oq44KiCgogICAgICBjb25zdCByYXcgPSBpbnB1dC52YWx1ZTsKICAgICAgaWYgKCFyYXcudHJpbSgpKSB7CiAgICAgICAgc2hvd01lc3NhZ2UoJyoq5rOo5oSPOioqIOODquODs+OCr+OCkuWFpeWKm+OBl+OBpuOBj+OBoOOBleOBhOOAgicpOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgLy8g44K544Kv44Oq44OX44OI44Kz44O844OJ44Gu44KI44GG44Gq5YWl5Yqb44Gv5ouS5ZCmCiAgICAgIGlmIChpc1NjcmlwdExpa2UocmF3KSkgewogICAgICAgIGFsZXJ0KCfjgojjgZvjgojjgIHjgYrjgozjga/miKbjgYTjgYzlq4zjgYTjgarjgpPjgaAnKTsKICAgICAgICBzaG93TWVzc2FnZSgnKirorablkYo6Kiog44K544Kv44Oq44OX44OI44Kz44O844OJ44KJ44GX44GN5YWl5Yqb44Gv5Y+X44GR5LuY44GR44G+44Gb44KT44CCJyk7CiAgICAgICAgdmlld2VyLnJlbW92ZUF0dHJpYnV0ZSgnc3JjJyk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBjb25zdCB1cmwgPSBub3JtYWxpemVVcmwocmF3KTsKICAgICAgaWYgKCF1cmwpIHsKICAgICAgICBzaG93TWVzc2FnZSgnKirjgqjjg6njg7w6Kiog5pyJ5Yq544Gq44Oq44Oz44Kv44Gn44Gv44GC44KK44G+44Gb44KT44CCJyk7CiAgICAgICAgdmlld2VyLnJlbW92ZUF0dHJpYnV0ZSgnc3JjJyk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBsZXQgcHJvdG9jb2wgPSAnJzsKICAgICAgdHJ5IHsKICAgICAgICBwcm90b2NvbCA9IG5ldyBVUkwodXJsKS5wcm90b2NvbDsKICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgIHNob3dNZXNzYWdlKCcqKuOCqOODqeODvDoqKiDjg6rjg7Pjgq/jga7op6PmnpDjgavlpLHmlZfjgZfjgb7jgZfjgZ/jgIInKTsKICAgICAgICB2aWV3ZXIucmVtb3ZlQXR0cmlidXRlKCdzcmMnKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIC8vIGh0dHAg44Gu5aC05ZCI44CB44OV44Oq44O8V2ktRmnliKnnlKjnorroqo0KICAgICAgaWYgKHByb3RvY29sID09PSAnaHR0cDonKSB7CiAgICAgICAgY29uc3Qgb2sgPSBjb25maXJtKCfjgZPjga7jg6rjg7Pjgq/jga/jgIxodHRw44CN44Gn44GZ44CC44OV44Oq44O8V2nigJFGaeOCkuS9v+OBo+OBpuOBhOOBvuOBm+OCk+OBi++8n1xu44Gv44GE44KS5oq844GZ44Go6KGo56S644GX44G+44GZ44CCJyk7CiAgICAgICAgaWYgKCFvaykgewogICAgICAgICAgc2hvd01lc3NhZ2UoJyoq44Kt44Oj44Oz44K744OrOioqIGh0dHDjg6rjg7Pjgq/jga7ooajnpLrjgpLkuK3mraLjgZfjgb7jgZfjgZ/jgIInLCAnIzU1NScpOwogICAgICAgICAgdmlld2VyLnJlbW92ZUF0dHJpYnV0ZSgnc3JjJyk7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICB9CgogICAgICAvLyDooajnpLoKICAgICAgdmlld2VyLnNyYyA9IHVybDsKICAgICAgc2hvd01lc3NhZ2UoJyoq6KGo56S6OioqIOODquODs+OCr+OCkuWfi+OCgei+vOOBv+ihqOekuuOBl+OBvuOBl+OBn+OAgicsICcjMDA2OTVjJyk7CiAgICB9KTsKCiAgICAvLyBFbnRlcuOCreODvOOBp+OCouOCr+OCu+OCuQogICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIChlKSA9PiB7CiAgICAgIGlmIChlLmtleSA9PT0gJ0VudGVyJykgYnRuLmNsaWNrKCk7CiAgICB9KTsKICA8L3NjcmlwdD4KPC9ib2R5Pgo8L2h0bWw+Cg==";
(function init(){
  const cached = getLoginCache();
  if(cached){
    // ログイン済みなら埋め込みHTMLを復号して表示
    const html = b64ToText(EMBED_B64);
    document.open();
    document.write(html);
    document.close();
  }else{
    // 未ログインなら login.html にリダイレクト
    location.href = "login.html";
  }
})();
</script>
</body>
</html>