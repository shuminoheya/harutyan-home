<!doctype html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>認証付きHTMLビューア</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>
<script>
function getLoginCache(){
  const raw = localStorage.getItem("harutyan-login");
  if(!raw) return null;
  try{
    const data = JSON.parse(raw);
    if(Date.now() > data.expiresAt){
      localStorage.removeItem("harutyan-login");
      return null;
    }
    return data.email;
  }catch{return null;}
}
function b64ToText(b64){
  return decodeURIComponent(escape(atob(b64)));
}
const EMBED_B64 = "PCFkb2N0eXBlIGh0bWw+CjxodG1sIGxhbmc9ImphIj4KPGhlYWQ+CiAgPG1ldGEgY2hhcnNldD0idXRmLTgiPgogIDx0aXRsZT5CaW5nIC8gWW91VHViZSDli5XnlLvooajnpLrjg4Tjg7zjg6s8L3RpdGxlPgogIDxtZXRhIG5hbWU9InZpZXdwb3J0IiBjb250ZW50PSJ3aWR0aD1kZXZpY2Utd2lkdGgsaW5pdGlhbC1zY2FsZT0xIj4KICA8c3R5bGU+CiAgICBib2R5IHsgZm9udC1mYW1pbHk6IHN5c3RlbS11aSwgc2Fucy1zZXJpZjsgbWFyZ2luOiAycmVtOyB9CiAgICAucm93IHsgZGlzcGxheTogZmxleDsgZ2FwOiAxcmVtOyBhbGlnbi1pdGVtczogY2VudGVyOyBmbGV4LXdyYXA6IHdyYXA7IG1hcmdpbi10b3A6IDFyZW07IH0KICAgIGlucHV0W3R5cGU9InVybCJdIHsgZmxleDogMTsgcGFkZGluZzogLjZyZW07IGZvbnQtc2l6ZTogMXJlbTsgfQogICAgYnV0dG9uIHsgcGFkZGluZzogLjZyZW0gMXJlbTsgZm9udC1zaXplOiAxcmVtOyB9CiAgICAuZXJyb3IgeyBjb2xvcjogI2IwMDAyMDsgbWFyZ2luLXRvcDogLjVyZW07IH0KICAgIC5wbGF5ZXItd3JhcCB7IG1hcmdpbi10b3A6IDFyZW07IGFzcGVjdC1yYXRpbzogMTYgLyA5OyBiYWNrZ3JvdW5kOiAjZjVmNWY1OyBib3JkZXI6IDFweCBzb2xpZCAjZGRkOyB9CiAgICAucGxheWVyLXdyYXAgaWZyYW1lIHsgd2lkdGg6IDEwMCU7IGhlaWdodDogMTAwJTsgYm9yZGVyOiAwOyB9CiAgPC9zdHlsZT4KPC9oZWFkPgo8Ym9keT4KICA8aDE+QmluZyAvIFlvdVR1YmUg5YuV55S76KGo56S644OE44O844OrPC9oMT4KCiAgPCEtLSDmnIDliJ3jga7jg5zjgr/jg7PnvqQgLS0+CiAgPGRpdiBjbGFzcz0icm93IiBpZD0iZmlyc3RCdXR0b25zIj4KICAgIDxidXR0b24gaWQ9ImJpbmdCdG4iPuWLleeUu+OCkuaOouOBmTwvYnV0dG9uPgogICAgPGJ1dHRvbiBpZD0idXJsQnRuIj5VUkzjgYvjgonjgqLjgq/jgrvjgrk8L2J1dHRvbj4KICA8L2Rpdj4KCiAgPCEtLSBVUkzlhaXlipvmrITjga/mnIDliJ3jga/pnZ7ooajnpLogLS0+CiAgPGRpdiBjbGFzcz0icm93IiBpZD0idXJsUm93IiBzdHlsZT0iZGlzcGxheTpub25lOyI+CiAgICA8bGFiZWwgZm9yPSJ1cmwiIHN0eWxlPSJ3aGl0ZS1zcGFjZTpub3dyYXA7Ij5Zb3VUdWJlIFVSTDo8L2xhYmVsPgogICAgPGlucHV0IGlkPSJ1cmwiIHR5cGU9InVybCIgcGxhY2Vob2xkZXI9Imh0dHBzOi8vd3d3LnlvdXR1YmUuY29tL3dhdGNoP3Y9VklERU9fSUQiIGlucHV0bW9kZT0idXJsIiBhdXRvY29tcGxldGU9Im9mZiI+CiAgICA8YnV0dG9uIGlkPSJlbWJlZEJ0biI+5Z+L44KB6L6844KAPC9idXR0b24+CiAgPC9kaXY+CgogIDxkaXYgaWQ9ImVycm9yIiBjbGFzcz0iZXJyb3IiIHJvbGU9ImFsZXJ0IiBhcmlhLWxpdmU9InBvbGl0ZSI+PC9kaXY+CgogIDxkaXYgY2xhc3M9InBsYXllci13cmFwIiBpZD0icGxheWVyIj4KICAgIDwhLS0gaWZyYW1l44GM44GT44GT44Gr5oy/5YWl44GV44KM44G+44GZIC0tPgogIDwvZGl2PgoKICA8c2NyaXB0PgogICAgY29uc3QgYmluZ0J0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdiaW5nQnRuJyk7CiAgICBjb25zdCB1cmxCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndXJsQnRuJyk7CiAgICBjb25zdCBmaXJzdEJ1dHRvbnMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmlyc3RCdXR0b25zJyk7CiAgICBjb25zdCB1cmxSb3cgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndXJsUm93Jyk7CiAgICBjb25zdCBlbWJlZEJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlbWJlZEJ0bicpOwogICAgY29uc3QgaW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndXJsJyk7CiAgICBjb25zdCBlcnJvckVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Vycm9yJyk7CiAgICBjb25zdCBwbGF5ZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGxheWVyJyk7CgogICAgZnVuY3Rpb24gc2hvd0Vycm9yKG1zZyl7IGVycm9yRWwudGV4dENvbnRlbnQgPSBtc2c7IH0KICAgIGZ1bmN0aW9uIGNsZWFyRXJyb3IoKXsgZXJyb3JFbC50ZXh0Q29udGVudCA9ICcnOyB9CgogICAgLy8gWW91VHViZemWi+Wni+aZgumWk+ODkeODqeODoeODvOOCv+OCkuenkuOBq+WkieaPmwogICAgZnVuY3Rpb24gcGFyc2VTdGFydFBhcmFtKHQpIHsKICAgICAgaWYgKCF0KSByZXR1cm4gMDsKICAgICAgY29uc3QgcmUgPSAvKD86KFxkKyloKT8oPzooXGQrKW0pPyg/OihcZCspcyk/JC87CiAgICAgIGNvbnN0IG0gPSBTdHJpbmcodCkubWF0Y2gocmUpOwogICAgICBpZiAoIW0pIHJldHVybiAwOwogICAgICBjb25zdCBoID0gcGFyc2VJbnQobVsxXSB8fCAnMCcsIDEwKTsKICAgICAgY29uc3QgbW50ID0gcGFyc2VJbnQobVsyXSB8fCAnMCcsIDEwKTsKICAgICAgY29uc3QgcyA9IHBhcnNlSW50KG1bM10gfHwgKC9cZCskLy50ZXN0KHQpID8gdCA6ICcwJyksIDEwKTsKICAgICAgcmV0dXJuIChoICogMzYwMCkgKyAobW50ICogNjApICsgczsKICAgIH0KCiAgICAvLyBZb3VUdWJl5YuV55S75oOF5aCx5oq95Ye6CiAgICBmdW5jdGlvbiBleHRyYWN0WW91VHViZUluZm8ocmF3VXJsKSB7CiAgICAgIGxldCB1cmw7CiAgICAgIHRyeSB7IHVybCA9IG5ldyBVUkwocmF3VXJsKTsgfSBjYXRjaCB7IHJldHVybiBudWxsOyB9CiAgICAgIGNvbnN0IGhvc3QgPSB1cmwuaG9zdG5hbWUudG9Mb3dlckNhc2UoKTsKICAgICAgY29uc3QgYWxsb3dlZCA9IFsnd3d3LnlvdXR1YmUuY29tJywneW91dHViZS5jb20nLCdtLnlvdXR1YmUuY29tJywneW91dHUuYmUnXTsKICAgICAgaWYgKCFhbGxvd2VkLmluY2x1ZGVzKGhvc3QpKSByZXR1cm4gbnVsbDsKCiAgICAgIGxldCB2aWRlb0lkID0gJycsIHN0YXJ0U2VjID0gMDsKICAgICAgaWYgKGhvc3QgPT09ICd5b3V0dS5iZScpIHsKICAgICAgICB2aWRlb0lkID0gdXJsLnBhdGhuYW1lLnJlcGxhY2UoL15cLysvLCAnJyk7CiAgICAgICAgc3RhcnRTZWMgPSBwYXJzZVN0YXJ0UGFyYW0odXJsLnNlYXJjaFBhcmFtcy5nZXQoJ3QnKSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY29uc3QgcGF0aCA9IHVybC5wYXRobmFtZTsKICAgICAgICBjb25zdCBzcCA9IHVybC5zZWFyY2hQYXJhbXM7CiAgICAgICAgaWYgKHBhdGggPT09ICcvd2F0Y2gnKSB7CiAgICAgICAgICB2aWRlb0lkID0gc3AuZ2V0KCd2JykgfHwgJyc7CiAgICAgICAgICBzdGFydFNlYyA9IHBhcnNlU3RhcnRQYXJhbShzcC5nZXQoJ3QnKSk7CiAgICAgICAgfSBlbHNlIGlmIChwYXRoLnN0YXJ0c1dpdGgoJy9lbWJlZC8nKSkgewogICAgICAgICAgdmlkZW9JZCA9IHBhdGguc3BsaXQoJy8nKVsyXSB8fCAnJzsKICAgICAgICAgIHN0YXJ0U2VjID0gcGFyc2VTdGFydFBhcmFtKHNwLmdldCgnc3RhcnQnKSB8fCBzcC5nZXQoJ3QnKSk7CiAgICAgICAgfSBlbHNlIGlmIChwYXRoLnN0YXJ0c1dpdGgoJy9zaG9ydHMvJykpIHsKICAgICAgICAgIHZpZGVvSWQgPSBwYXRoLnNwbGl0KCcvJylbMl0gfHwgJyc7CiAgICAgICAgICBzdGFydFNlYyA9IHBhcnNlU3RhcnRQYXJhbShzcC5nZXQoJ3QnKSk7CiAgICAgICAgfSBlbHNlIHJldHVybiBudWxsOwogICAgICB9CiAgICAgIGlmICghL15bQS1aYS16MC05Xy1dezYsfSQvLnRlc3QodmlkZW9JZCkpIHJldHVybiBudWxsOwogICAgICByZXR1cm4geyB2aWRlb0lkLCBzdGFydFNlYyB9OwogICAgfQoKICAgIGZ1bmN0aW9uIGNyZWF0ZVlvdVR1YmVFbWJlZCh7IHZpZGVvSWQsIHN0YXJ0U2VjIH0pIHsKICAgICAgY29uc3Qgc3JjID0gbmV3IFVSTChgaHR0cHM6Ly93d3cueW91dHViZS5jb20vZW1iZWQvJHtlbmNvZGVVUklDb21wb25lbnQodmlkZW9JZCl9YCk7CiAgICAgIGlmIChzdGFydFNlYyA+IDApIHNyYy5zZWFyY2hQYXJhbXMuc2V0KCdzdGFydCcsIFN0cmluZyhzdGFydFNlYykpOwogICAgICBzcmMuc2VhcmNoUGFyYW1zLnNldCgncmVsJywnMCcpOwogICAgICBzcmMuc2VhcmNoUGFyYW1zLnNldCgnbW9kZXN0YnJhbmRpbmcnLCcxJyk7CiAgICAgIGNvbnN0IGlmcmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lmcmFtZScpOwogICAgICBpZnJhbWUuc3JjID0gc3JjLnRvU3RyaW5nKCk7CiAgICAgIGlmcmFtZS5hbGxvdyA9ICdhY2NlbGVyb21ldGVyOyBhdXRvcGxheTsgY2xpcGJvYXJkLXdyaXRlOyBlbmNyeXB0ZWQtbWVkaWE7IGd5cm9zY29wZTsgcGljdHVyZS1pbi1waWN0dXJlOyB3ZWItc2hhcmUnOwogICAgICBpZnJhbWUucmVmZXJyZXJQb2xpY3kgPSAnc3RyaWN0LW9yaWdpbi13aGVuLWNyb3NzLW9yaWdpbic7CiAgICAgIGlmcmFtZS5sb2FkaW5nID0gJ2xhenknOwogICAgICBpZnJhbWUudGl0bGUgPSAnWW91VHViZSB2aWRlbyBwbGF5ZXInOwogICAgICBpZnJhbWUuc2V0QXR0cmlidXRlKCdhbGxvd0Z1bGxzY3JlZW4nLCd0cnVlJyk7CiAgICAgIHJldHVybiBpZnJhbWU7CiAgICB9CgogICAgLy8gQmluZ+WLleeUu+ODmuODvOOCuOihqOekugogICAgYmluZ0J0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHsKICAgICAgY2xlYXJFcnJvcigpOwogICAgICBwbGF5ZXIuaW5uZXJIVE1MID0gJyc7CiAgICAgIGNvbnN0IGlmcmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lmcmFtZScpOwogICAgICBpZnJhbWUuc3JjID0gImh0dHBzOi8vd3d3LmJpbmcuY29tL3ZpZGVvcy9yaXZlcnZpZXcvcmVsYXRlZHZpZGVvPyZxPSVFNiU4MCVBQSVFNyU4RCVBMyVFMyU4MCU4MCVFMyU4MiVCNSVFMyU4MiVBQiVFMyU4MyU4QSVFMyU4MiVBRiVFMyU4MiVCNyVFMyU4MyVBNyVFMyU4MyVCMyYmbWlkPTZDMUM3QzEyNEUzQjVFMUJGOTc4NkMxQzdDMTI0RTNCNUUxQkY5NzgmJkZPUk09VlJER0FSIjsKICAgICAgaWZyYW1lLnJlZmVycmVyUG9saWN5ID0gJ25vLXJlZmVycmVyJzsKICAgICAgaWZyYW1lLnNhbmRib3ggPSAiYWxsb3ctc2NyaXB0cyBhbGxvdy1mb3JtcyBhbGxvdy1wb2ludGVyLWxvY2sgYWxsb3ctcG9wdXBzIGFsbG93LW1vZGFscyBhbGxvdy1zYW1lLW9yaWdpbiI7CiAgICAgIGlmcmFtZS50aXRsZSA9ICJCaW5nIHZpZGVvIHBhZ2UiOwogICAgICBwbGF5ZXIuYXBwZW5kQ2hpbGQoaWZyYW1lKTsKCiAgICAgIC8vIOODnOOCv+ODs+OCkumaoOOBmQogICAgICBmaXJzdEJ1dHRvbnMuc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgIH0pOwoKICAgIC8vIFVSTOWFpeWKm+ashOOCkuihqOekugogICAgdXJsQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gewogICAgICB1cmxSb3cuc3R5bGUuZGlzcGxheSA9ICdmbGV4JzsKICAgICAgLy8g44Oc44K/44Oz44KS6Zqg44GZCiAgICAgIGZpcnN0QnV0dG9ucy5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogICAgfSk7CgogICAgLy8gWW91VHViZeWfi+OCgei+vOOBvwogICAgZW1iZWRCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7CiAgICAgIGNsZWFyRXJyb3IoKTsKICAgICAgY29uc3QgcmF3ID0gaW5wdXQudmFsdWUudHJpbSgpOwogICAgICBwbGF5ZXIuaW5uZXJIVE1MID0gJyc7CiAgICAgIGNvbnN0IHl0SW5mbyA9IGV4dHJhY3RZb3VUdWJlSW5mbyhyYXcpOwogICAgICBpZiAoeXRJbmZvKSB7CiAgICAgICAgcGxheWVyLmFwcGVuZENoaWxkKGNyZWF0ZVlvdVR1YmVFbWJlZCh5dEluZm8pKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBzaG93RXJyb3IoJ+acieWKueOBqllvdVR1YmXjga5VUkzjgpLlhaXlipvjgZfjgabjgY/jgaDjgZXjgYTjgIInKTsKICAgICAgfQogICAgfSk7CiAgPC9zY3JpcHQ+CjwvYm9keT4KPC9odG1sPgo=";
(function init(){
  const cached = getLoginCache();
  if(cached){
    // ログイン済みなら埋め込みHTMLを復号して表示
    const html = b64ToText(EMBED_B64);
    document.open();
    document.write(html);
    document.close();
  }else{
    // 未ログインなら login.html にリダイレクト
    location.href = "login.html";
  }
})();
</script>
</body>
</html>